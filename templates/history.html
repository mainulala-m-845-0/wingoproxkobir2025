<!DOCTYPE html>
<html>
<head>
  <title>üìú Prediction History</title>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial; background: #1a1a1a; color: #eee; text-align: center; margin:0; padding:0; }
    .card { background:#222; margin:20px auto; padding:20px; border-radius:10px; width:90%; max-width:1200px;
            box-shadow:0 0 10px #000; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #555; padding: 6px; text-align: center; }
    th { background: #333; color: #ffcc00; }
    tr:nth-child(even) { background: #2a2a2a; }

    .summary { background: #111; padding: 15px; margin-bottom: 15px; border-radius: 8px; font-size: 1.1rem; }
    .win-text { color: #4CAF50; font-weight:bold; }
    .loss-text { color: #f44336; font-weight:bold; }
    .acc-text { color: #29b6f6; font-weight:bold; }

    .btn {
      display: inline-block; margin: 10px 6px; padding: 10px 15px;
      background: #ffcc00; color: #111; font-weight: bold;
      border-radius: 6px; text-decoration: none;
    }
    .btn:hover { background: #ffaa00; }
  </style>
</head>
<body>
  <h1>üìú Prediction History</h1>

  <div class="card summary">
    üü¢ Wins: <span class="win-text">{{ wins }}</span> |
    üî¥ Losses: <span class="loss-text">{{ losses }}</span> |
    üìà Accuracy: <span class="acc-text">{{ accuracy }}%</span> <br>
    <a href="/history/export" class="btn">‚¨áÔ∏è Export Today (CSV)</a>
    <a href="/archives" class="btn">üìÇ View Archived CSVs</a>
    <a href="/" class="btn">‚¨ÖÔ∏è Back to Dashboard</a>
  </div>

  <div class="card">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Issue</th>
          <th>Number</th>
          <th>Big/Small (Actual)</th>
          <th>Color</th>
          <th>Prediction (What We Said)</th>
          <th>Strategy</th>
          <th>Outcome</th>
          <th>Timestamp (UTC)</th>
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
        <tr>
          <td>{{ row['id'] }}</td>
          <td>{{ row['issue'][-5:] }}</td>
          <td>{{ row['number'] }}</td>
          <td>{{ row['bigsmall'] }}</td>
          <td>{{ row['color'] }}</td>
          <td class="{% if 'WIN' in row['outcome'] %}win-text{% else %}loss-text{% endif %}">
            {{ row['prediction'] }}
          </td>
          <td>{{ row['strategy'] }}</td>
          <td>{% if 'WIN' in row['outcome'] %}‚úÖ WIN{% else %}‚ùå LOSS{% endif %}</td>
          <td>{{ row['timestamp'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</body>
</html>
